Heavily inspired [by](https://github.com/frc971/971-Robot-Code/blob/a27f3ad1319390010633d0e651144891128b1bd2/aos/ipc_lib/aos_sync.cc)
